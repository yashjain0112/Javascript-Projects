<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Circles</title>
    <script src="paper-full.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.3/howler.js"></script>
    <link rel="stylesheet" href="circles.css" />

    <script type="text/paperscript" canvas="myCanvas">

       var keyData = {
       	q: {
       		sound: new Howl({
         		src: ['sounds/bubbles.mp3']
       		}),
       		color: randomColor()
       	},
       	w: {
       		sound: new Howl({
         		src: ['sounds/clay.mp3']
       		}),
       		color: randomColor()
       	},
       	e: {
       		sound: new Howl({
         		src: ['sounds/confetti.mp3']
       		}),
       		color: randomColor()
       	},
       	r: {
       		sound: new Howl({
         		src: ['sounds/corona.mp3']
       		}),
       		color: randomColor()
       	},
       		t: {
       		sound: new Howl({
         		src: ['sounds/dotted-spiral.mp3']
       		}),
       		color: randomColor()
       	},
       	y: {
       		sound: new Howl({
         		src: ['sounds/flash-1.mp3']
       		}),
       		color: randomColor()
       	},
       	u: {
       		sound: new Howl({
         		src: ['sounds/flash-2.mp3']
       		}),
       		color: randomColor()
       	},
       	i: {
       		sound: new Howl({
         		src: ['sounds/flash-3.mp3']
       		}),
       		color: randomColor()
       	},
       	o: {
       		sound: new Howl({
       			src: ['sounds/glimmer.mp3']
       		}),
       		color: randomColor()
       	},
       	p: {
       		sound: new Howl({
         		src: ['sounds/moon.mp3']
       		}),
       		color: randomColor()
       	},
       	a: {
       		sound: new Howl({
         		src: ['sounds/pinwheel.mp3']
       		}),
       		color: randomColor()
       	},
       	s: {
       		sound: new Howl({
         		src: ['sounds/piston-1.mp3']
       		}),
       		color: randomColor()
       	},
       		d: {
       		sound: new Howl({
         		src: ['sounds/piston-2.mp3']
       		}),
       		color: randomColor()
       	},
       	f: {
       		sound: new Howl({
         		src: ['sounds/prism-1.mp3']
       		}),
       		color: randomColor()
       	},
       	g: {
       		sound: new Howl({
         		src: ['sounds/prism-2.mp3']
       		}),
       		color: randomColor()
       	},
       	h: {
       		sound: new Howl({
         		src: ['sounds/prism-3.mp3']
       		}),
       		color: randomColor()
       	},
       	j: {
       		sound: new Howl({
         		src: ['sounds/splits.mp3']
       		}),
       		color: randomColor()
       	},
       	k: {
       		sound: new Howl({
         		src: ['sounds/squiggle.mp3']
       		}),
       		color: randomColor()
       	},
       	l: {
       		sound: new Howl({
         		src: ['sounds/strike.mp3']
       		}),
       		color: randomColor()
       	},
       	z: {
       		sound: new Howl({
         		src: ['sounds/suspension.mp3']
       		}),
       		color: randomColor()
       	},
       	x: {
       		sound: new Howl({
         		src: ['sounds/timer.mp3']
       		}),
       		color: randomColor()
       	},
       	c: {
       		sound: new Howl({
         		src: ['sounds/ufo.mp3']
       		}),
       		color: randomColor()
       	},
       	v: {
       		sound: new Howl({
         		src: ['sounds/veil.mp3']
       		}),
       		color: randomColor()
       	},
       	b: {
       		sound: new Howl({
         		src: ['sounds/wipe.mp3']
       		}),
       		color: randomColor()
       	},
       	n: {
       		sound: new Howl({
       			src: ['sounds/zig-zag.mp3']
       		}),
       		color: randomColor()
       	},
       	m: {
       		sound: new Howl({
         		src: ['sounds/moon.mp3']
       		}),
       		color: randomColor()
       	}
       }


               var circles = [];
      var sounds = [];

               function onKeyDown(event) {
                   if(keyData[event.key]) {
                   var maxPoint = new Point(view.size.width, view.size.height);
                   var randomPoint = Point.random();
                   var point = maxPoint * randomPoint;
                   var newCircle = new Path.Circle(point, 500);
                   newCircle.fillColor = keyData[event.key].color;
       var soundChain = keyData[event.key].sound;
                   keyData[event.key].sound.play();
                   circles.push(newCircle);
       sounds.push(soundChain);
                   }
       if(event.key == 'enter') {
        console.log(sounds);
        for(var i = 0; i<sounds.length; i++) {
      	  sounds[i].play();
        }
        for(var i = 0; i<sounds.length; i++) {
                         sounds.splice(i, sounds.length);
        }
       }
               }

               function onFrame(event){
                   for(var i = 0; i < circles.length; i++){
                   circles[i].scale(0.93);
                   circles[i].fillColor.hue += 1;
                 	if(circles[i].area < 1){
                       circles[i].remove();
                       circles.splice(i, 1);
                   }
                   }
      }

      function randomColor() {
       var r = Math.floor(Math.random() * 256);
       var g = Math.floor(Math.random() * 256);
       var b = Math.floor(Math.random() * 256);
       return "rgb(" + r + ", " + g + ", " + b + ")";
      }
    </script>
  </head>
  <body>
    <canvas id="myCanvas" resize></canvas>
  </body>
</html>
